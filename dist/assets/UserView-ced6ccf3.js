import{h as L,j as S,k as T,o as M,r as G,b as n,c as s,e as t,l as z,w as p,v as k,m as A,t as c,F as y,d as b,n as W,u as e,g as a,i as v,p as q,f as K,_ as J}from"./index-990f6206.js";import{l as i,o as Q,a as f,v as E,s as X,b as Y,c as x,d as Z,p as N,e as j,g as ee,h as te,i as U,j as oe,k as ne}from"./post_comment-ac43bace.js";import{f as se,p as D,a as $,b as B,c as le,v as F,s as ae,d as ie,e as V,g as P,h as ue,i as re}from"./profile_comment-6aa212d2.js";const ce={class:"mainWrapper"},de={class:"contentBox"},_e=["onSubmit"],me=t("span",null,"Lookup user page",-1),pe=t("br",null,null,-1),ke=["onKeyup"],ve=t("br",null,null,-1),he={style:{color:"red"}},ye=["onClick"],be=t("br",null,null,-1),Ce=t("br",null,null,-1),fe=["src"],ge=t("br",null,null,-1),we=["onClick"],xe=["id"],Ue={key:0},$e={key:1},Be=t("h2",null,"New comment",-1),Ve=t("br",null,null,-1),Pe=t("br",null,null,-1),Se=["onClick"],Te=["onClick"],Ee=["onClick"],Ne=["onClick"],je=["onClick"],De=["onClick"],Fe=["id"],Ke=t("br",null,null,-1),Oe=t("br",null,null,-1),He=["onClick"],Re={style:{color:"red"}},Ie=["src"],Le=t("br",null,null,-1),Me=t("br",null,null,-1),Ge=t("br",null,null,-1),ze=["onClick"],Ae=["onClick"],We=["onClick"],qe=["onClick"],Je=t("br",null,null,-1),Qe=["id"],Xe={key:0,name:"newComment"},Ye=["onClick"],Ze={key:1},et=t("br",null,null,-1),tt=["onClick"],ot=["onClick"],nt=["onClick"],st=["onClick"],lt=["onClick"],at=["id"],it=["onClick"],ut={style:{color:"red"}},rt=["onClick"],ct=t("br",null,null,-1),dt=t("br",null,null,-1),_t={__name:"UserPage",setup(O){const g=`http://localhost:${{}.HEROKU}/`+"api",R=L(),_=S(""),m=S(""),h=T([]),w=T([]);M(()=>{m.value=R.params.username,m.value!=null&&C()});async function C(){if(h.values=[],w.values=[],m.value==""){_.value="Please specify a username!";return}_.value="";try{const d=await fetch(g+"/utente/"+m.value,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"});if(d.ok)w.values=await d.json();else{const u=await d.json();_.value=u.Error||"Something went wrong"}}catch(d){_.value="Network error",console.log(d)}try{const d=await fetch(g+"/post/user/"+m.value,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"});if(d.ok)h.values=await d.json();else{const u=await d.json();_.value=u.Error||"Something went wrong",h.values=[]}}catch(d){_.value="Network error",console.log(d),h.values=[]}}return(d,u)=>{const I=G("date-format");return n(),s("div",ce,[t("div",de,[t("form",{onSubmit:z(C,["prevent"])},[me,pe,p(t("input",{class:"textBox","onUpdate:modelValue":u[0]||(u[0]=l=>m.value=l),onKeyup:A(C,["enter"]),placeholder:"Username"},null,40,ke),[[k,m.value]]),t("button",{type:"button",class:"generic",onClick:C},"Search user"),ve,t("span",he,c(_.value),1)],40,_e)]),(n(!0),s(y,null,b(w.values,l=>(n(),s("div",{class:"userBox",key:d.self,style:W({backgroundImage:"url(/src/assets/"+l.banner+")"})},[t("h2",null,c(l.username),1),e(i).token?(n(),s("button",{key:0,type:"button",class:"generic",onClick:o=>e(Q)(l.username)},"Follow/Unfollow",8,ye)):a("",!0),be,Ce,t("img",{class:"circular",src:"/src/assets/"+l.icona_profilo,alt:"ProPic",width:"100",height:"100"},null,8,fe),ge,t("p",null,"Userscore: "+c(l.userscore),1),t("button",{type:"button",class:"smaller",onClick:o=>{e(f)("commenti"+l.username),e(se)(l.username)}},"Comms",8,we),t("div",{class:"contentBox",id:"commenti"+l.username,style:{display:"none"}},[e(D).length==0?(n(),s("h3",Ue,"No comments")):a("",!0),e(i).username!=l.username&&e(i).token?(n(),s("div",$e,[Be,p(t("input",{type:"text",class:"textBox","onUpdate:modelValue":u[1]||(u[1]=o=>v($)?$.value=o:null),placeholder:"Title"},null,512),[[k,e($)]]),Ve,p(t("input",{type:"text",class:"textBox","onUpdate:modelValue":u[2]||(u[2]=o=>v(B)?B.value=o:null),placeholder:"Text"},null,512),[[k,e(B)]]),Pe,t("button",{type:"button",class:"smaller",onClick:o=>e(le)(l.username)},"Submit",8,Se)])):a("",!0),(n(!0),s(y,null,b(e(D),o=>(n(),s("div",{key:o.self},[t("h2",null,c(o.titolo),1),t("h3",null,c(o.creatore_commento),1),t("p",null,c(o.testo),1),t("p",null,"Voto: "+c(o.punteggio_commento),1),e(i).token?(n(),s("button",{key:0,type:"button",class:"vote",onClick:r=>e(F)(1,o.id)},"Upvote",8,Te)):a("",!0),e(i).token?(n(),s("button",{key:1,type:"button",class:"vote",onClick:r=>e(F)(-1,o.id)},"Downvote",8,Ee)):a("",!0),e(i).token?(n(),s("button",{key:2,type:"button",class:"smaller",onClick:r=>e(ae)(o.id)},"Flag",8,Ne)):a("",!0),e(i).username==o.creatore_commento?(n(),s("button",{key:3,type:"button",class:"smaller",onClick:r=>e(ie)(o.id)},"Delete",8,je)):a("",!0),e(i).username==o.creatore_commento?(n(),s("button",{key:4,type:"button",class:"smaller",onClick:r=>e(f)("edit"+o.id)},"Edit",8,De)):a("",!0),e(i).username==o.creatore_commento?(n(),s("div",{key:5,id:"edit"+o.id,style:{display:"none"}},[p(t("input",{type:"text",class:"textBox","onUpdate:modelValue":u[3]||(u[3]=r=>v(V)?V.value=r:null),placeholder:"New Title"},null,512),[[k,e(V)]]),Ke,p(t("input",{type:"text",class:"textBox","onUpdate:modelValue":u[4]||(u[4]=r=>v(P)?P.value=r:null),placeholder:"New Text"},null,512),[[k,e(P)]]),Oe,t("button",{type:"button",class:"smaller",onClick:r=>e(ue)(o.id)},"Submit",8,He)],8,Fe)):a("",!0)]))),128)),t("span",Re,c(e(re)),1)],8,xe)],4))),128)),(n(!0),s(y,null,b(h.values,l=>(n(),s("div",{key:l.self,class:"contentBox"},[t("h2",null,c(l.titolo),1),t("img",{src:"/src/assets/"+l.media,height:"500",width:"500"},null,8,Ie),Le,t("p",null,c(l.testo),1),(n(!0),s(y,null,b(l.tag,o=>(n(),s("p",null,"#"+c(o),1))),256)),q("text "),t("p",null,"Upvotes: "+c(l.punteggio_post),1),K(I,{date:new Date(l.data)},null,8,["date"]),Me,Ge,e(i).token?(n(),s("button",{key:0,class:"vote",onClick:o=>e(E)(1,l.id)},"Upvote",8,ze)):a("",!0),e(i).token?(n(),s("button",{key:1,class:"vote",onClick:o=>e(E)(-1,l.id)},"Downvote",8,Ae)):a("",!0),e(i).token?(n(),s("button",{key:2,class:"smaller",onClick:o=>e(X)(l.id)},"Save",8,We)):a("",!0),t("button",{type:"button",class:"smaller",onClick:o=>{e(f)("commento"+l.id),e(Y)(l.id)}},"Comms",8,qe),Je,t("div",{class:"contentBox",name:"commento",id:"commento"+l.id,style:{display:"none"}},[e(i).token?(n(),s("div",Xe,[p(t("input",{type:"text",class:"textBox",name:"newCommento","onUpdate:modelValue":u[5]||(u[5]=o=>v(x)?x.value=o:null),placeholder:"Comment"},null,512),[[k,e(x)]]),t("button",{type:"button",class:"smaller",onClick:o=>e(Z)(l.id)},"Submit",8,Ye)])):a("",!0),e(N).length==0?(n(),s("h3",Ze,"No comments")):a("",!0),(n(!0),s(y,null,b(e(N),o=>(n(),s("div",{key:o.self},[t("h2",null,c(o.creatore_commento),1),t("p",null,c(o.testo),1),t("p",null,"Voto: "+c(o.punteggio_commento),1),et,e(i).token?(n(),s("button",{key:0,type:"button",class:"vote",onClick:r=>e(j)(1,o.id)},"Upvote",8,tt)):a("",!0),e(i).token?(n(),s("button",{key:1,type:"button",class:"vote",onClick:r=>e(j)(-1,o.id)},"Downvote",8,ot)):a("",!0),e(i).token?(n(),s("button",{key:2,type:"button",class:"smaller",onClick:r=>e(ee)(o.id)},"Flag",8,nt)):a("",!0),e(i).username==o.creatore_commento?(n(),s("button",{key:3,type:"button",class:"smaller",onClick:r=>e(te)(o.id)},"Delete",8,st)):a("",!0),e(i).username==o.creatore_commento?(n(),s("button",{key:4,type:"button",class:"smaller",onClick:r=>e(f)("edit"+o.id)},"Edit",8,lt)):a("",!0),e(i).username==o.creatore_commento?(n(),s("div",{key:5,id:"edit"+o.id,style:{display:"none"}},[p(t("input",{type:"text",class:"textBox","onUpdate:modelValue":u[6]||(u[6]=r=>v(U)?U.value=r:null),placeholder:"Text"},null,512),[[k,e(U)]]),t("button",{type:"button",class:"smaller",onClick:r=>e(oe)(o.id)},"Submit",8,it)],8,at)):a("",!0)]))),128)),t("span",ut,c(e(ne)),1)],8,Qe),e(i).token?(n(),s("button",{key:3,type:"button",class:"smaller",onClick:o=>d.segnala(l.id)},"Flag",8,rt)):a("",!0),ct,dt]))),128))])}}};const mt={__name:"UserView",setup(O){return(H,g)=>(n(),s("div",null,[K(_t)]))}},ht=J(mt,[["__scopeId","data-v-d3facdff"]]);export{ht as default};
