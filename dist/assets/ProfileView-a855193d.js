import{j as S,q as yt,s as bt,o as vt,r as ht,b as s,c as i,u as e,F as b,d as v,e as t,w as c,v as p,g as d,l as Y,i as _,m as f,t as a,n as kt,x as gt,p as Ct,f as q}from"./index-ba19e415.js";import{q as N,r as G,u as T,t as D,w as F,x as O,y as K,z as E,l as r,a as h,A as Q,B as M,C as X,D as ft,E as L,F as Z,G as R,H as xt,I as tt,J as wt,K as et,L as j,M as Bt,N as Ut,b as lt,c as H,d as Vt,p as w,e as B,g as ot,h as nt,i as x,j as st,k as it,O as I,P as W,Q as A,R as $t,S as Pt,T as St,U as Nt,V as k,W as ut,X as y,Y as Tt}from"./post_comment-46476a66.js";import{f as Dt,p as at}from"./profile_comment-1473af09.js";const Ft={key:0,class:"mainWrapper"},Ot=t("br",null,null,-1),Kt=["src"],Et=t("br",null,null,-1),Mt=["onClick"],Lt=["id"],Rt={key:0},jt=t("br",null,null,-1),Ht=t("br",null,null,-1),It=t("br",null,null,-1),Wt={id:"settings",class:"contentBox",style:{display:"none"}},At=t("br",null,null,-1),qt={style:{color:"red"}},zt={class:"table",style:{display:"flex","justify-content":"center"}},Jt={style:{display:"block",margin:"auto","align-self":"auto"}},Yt={rowspan:"4"},Gt={style:{color:"red"}},Qt=t("br",null,null,-1),Xt=t("label",{for:"nsfw",style:{padding:"20px"}},"NSFW:",-1),Zt=t("option",{value:"yes"},"Yes",-1),te=t("option",{value:"no"},"No",-1),ee=t("option",{value:"blur"},"Blur",-1),le=[Zt,te,ee],oe=t("br",null,null,-1),ne={style:{color:"red"}},se={class:"contentBox",id:"followed",style:{display:"none"}},ie={key:0},ue=["onClick"],ae={class:"contentBox"},de=t("h2",null,"Favourite posts",-1),re=["onClick"],ce={id:"favourites",style:{display:"none"}},pe=["src"],_e=t("br",null,null,-1),me=t("br",null,null,-1),ye=t("br",null,null,-1),be=["onClick"],ve=["onClick"],he=["onClick"],ke=t("br",null,null,-1),ge=["id"],Ce={key:0,name:"newComment"},fe=["onClick"],xe={key:1},we=t("br",null,null,-1),Be=["onClick"],Ue=["onClick"],Ve=["onClick"],$e=["onClick"],Pe=["onClick"],Se=["id"],Ne=["onClick"],Te={style:{color:"red"}},De=["onClick"],Fe=t("br",null,null,-1),Oe=t("br",null,null,-1),Ke={class:"contentBox"},Ee=t("h4",null,"Crea nuovo post",-1),Me=t("br",null,null,-1),Le=t("br",null,null,-1),Re=t("br",null,null,-1),je={for:"file-upload",class:"label"},He=t("br",null,null,-1),Ie=["src"],We=t("br",null,null,-1),Ae=t("br",null,null,-1),qe=t("br",null,null,-1),ze=["onClick"],Je=t("br",null,null,-1),Ye=["id"],Ge={key:0},Qe=t("br",null,null,-1),Xe=["onClick"],Ze=["onClick"],tl=["onClick"],el=["onClick"],ll=["onClick"],ol=["id"],nl=["onClick"],sl={style:{color:"red"}},il=["onClick"],ul=["id"],al=t("h3",null,"Edit post",-1),dl=t("br",null,null,-1),rl=t("br",null,null,-1),cl=t("br",null,null,-1),pl=["onClick"],_l=t("br",null,null,-1),ml={style:{color:"red"}},yl=t("br",null,null,-1),bl=["onClick"],vl={key:1},hl={class:"loginBox"},kl=t("h2",null,"Login to your account",-1),gl=t("br",null,null,-1),Cl=t("br",null,null,-1),fl={style:{color:"red"}},xl={class:"loginBox"},wl=t("h2",null,"Sign up",-1),Bl=t("br",null,null,-1),Ul=t("br",null,null,-1),Vl=t("br",null,null,-1),$l=t("br",null,null,-1),Pl={style:{color:"red"}},Sl={__name:"ProfilePage",setup(dt){const U=({}.VITE_API_HOST||"https://epiopera-4f1c76fdd577.herokuapp.com/")+"/api",V=S(""),$=S(""),P=S("");var z="",J="";const ct=yt();bt(r,(m,l)=>{N(),G(),ut.value=""}),vt(()=>{N(),G()});function pt(m){let l=m.target.files[0];z=l,J=l.name}function _t(){const m=new FormData;m.append("file",z);let l=P.value,g=J;l==""&&(console.log("Text is null"),l=null),g==""&&(console.log("Media is null"),g=null);const n={titolo:V.value,testo:l,tag:$.value.split(" "),media:g,username:r.username,associato_a_contest:[]};g!=null&&fetch(U+"/upload",{method:"POST",body:m,credentials:"include"}).then(o=>{console.log(o)}).catch(o=>{console.log(o)}),document.cookie=`tokenEpiOpera=${r.token}`,fetch(U+"/post",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n),credentials:"include"}).then(o=>{console.log(o)}).catch(o=>{console.log(o)}),N()}function mt(m){ct.push({name:"userparam",params:{username:m}})}return(m,l)=>{const g=ht("date-format");return s(),i(b,null,[e(r).token?(s(),i("div",Ft,[(s(!0),i(b,null,v(e(j).values,n=>(s(),i("div",{class:"userBox",key:n.self,style:kt({backgroundImage:"url(/src/assets/"+n.banner+")"})},[t("h2",null,"Welcome "+a(n.username),1),Ot,t("img",{class:"circular",src:"/src/assets/"+n.icona_profilo,alt:"ProPic",width:"100",height:"100"},null,8,Kt),Et,t("p",null,"Userscore: "+a(n.userscore),1),t("button",{type:"button",class:"smaller",onClick:o=>{e(h)("commenti"+n.username),e(Dt)(n.username)}},"Comms",8,Mt),t("div",{class:"contentBox",id:"commenti"+n.username,style:{display:"none"}},[e(at).length==0?(s(),i("h2",Rt,"No Profile Comments")):d("",!0),(s(!0),i(b,null,v(e(at),o=>(s(),i("div",{key:o.self},[t("h2",null,a(o.titolo),1),t("h3",null,a(o.creatore_commento),1),t("p",null,a(o.testo),1)]))),128))],8,Lt),jt,t("button",{type:"button",class:"generic",onClick:l[0]||(l[0]=(...o)=>e(Q)&&e(Q)(...o))},"Log out"),Ht,t("button",{type:"button",class:"generic",onClick:l[1]||(l[1]=o=>e(h)("settings"))},"Settings"),It,t("div",Wt,[c(t("input",{class:"textBox",type:"text",name:"newMail","onUpdate:modelValue":l[2]||(l[2]=o=>_(M)?M.value=o:null),placeholder:"New Email address"},null,512),[[p,e(M)]]),t("button",{type:"button",class:"smaller",onClick:l[3]||(l[3]=(...o)=>e(X)&&e(X)(...o))},"Submit"),At,t("span",qt,a(e(ft)),1),t("div",zt,[t("table",Jt,[t("tr",null,[t("td",null,[c(t("input",{type:"password",class:"textBox",name:"newPsw","onUpdate:modelValue":l[4]||(l[4]=o=>_(L)?L.value=o:null),placeholder:"New Password"},null,512),[[p,e(L)]])]),t("td",Yt,[t("button",{type:"button",class:"smaller",onClick:l[5]||(l[5]=(...o)=>e(Z)&&e(Z)(...o))},"Submit")])]),t("tr",null,[c(t("input",{type:"password",class:"textBox",name:"newPsw","onUpdate:modelValue":l[6]||(l[6]=o=>_(R)?R.value=o:null),placeholder:"Repeat Password"},null,512),[[p,e(R)]])])])]),t("span",Gt,a(e(xt)),1),Qt,Xt,c(t("select",{name:"nsfw",id:"nsfw","onUpdate:modelValue":l[7]||(l[7]=o=>m.nsfw=o)},le,512),[[gt,m.nsfw]]),t("button",{type:"button",onClick:l[8]||(l[8]=(...o)=>e(tt)&&e(tt)(...o)),class:"smaller"},"Submit"),oe,t("span",ne,a(e(wt)),1),t("button",{type:"button",class:"generic",onClick:l[9]||(l[9]=(...o)=>e(et)&&e(et)(...o))},"Delete this account")]),t("button",{type:"button",class:"generic",onClick:l[10]||(l[10]=o=>e(h)("followed"))},"Show followed users"),t("div",se,[e(j).values[0].utenti_seguiti.length==0?(s(),i("h2",ie,"No followed users")):d("",!0),(s(!0),i(b,null,v(e(j).values[0].utenti_seguiti,o=>(s(),i("div",null,[t("button",{type:"button",class:"green",onClick:u=>mt(o)},a(o),9,ue)]))),256))]),t("div",ae,[de,t("button",{type:"button",class:"generic",onClick:o=>{e(h)("favourites"),e(Bt)(n.post_favoriti)}},"Show",8,re),t("div",ce,[(s(!0),i(b,null,v(e(Ut),o=>(s(),i("div",{class:"contentBox",key:o.self},[t("h2",null,a(o.titolo),1),t("img",{src:"/src/assets/"+o.media,height:"500",width:"500"},null,8,pe),_e,t("p",null,a(o.testo),1),(s(!0),i(b,null,v(o.tag,u=>(s(),i("p",null,"#"+a(u),1))),256)),Ct("text "),t("p",null,"Upvotes: "+a(o.punteggio_post),1),q(g,{date:new Date(o.data)},null,8,["date"]),me,ye,e(r).token?(s(),i("button",{key:0,class:"vote",onClick:u=>m.vote(1,o.id)},"Upvote",8,be)):d("",!0),e(r).token?(s(),i("button",{key:1,class:"vote",onClick:u=>m.vote(-1,o.id)},"Downvote",8,ve)):d("",!0),t("button",{type:"button",class:"smaller",onClick:u=>{e(h)("commento"+o.id),e(lt)(o.id)}},"Comms",8,he),ke,t("div",{class:"contentBox",name:"commento",id:"commento"+o.id,style:{display:"none"}},[e(r).token?(s(),i("div",Ce,[c(t("input",{type:"text",class:"textBox",name:"newCommento","onUpdate:modelValue":l[11]||(l[11]=u=>_(H)?H.value=u:null),placeholder:"Comment"},null,512),[[p,e(H)]]),t("button",{type:"button",class:"smaller",onClick:u=>e(Vt)(o.id)},"Submit",8,fe)])):d("",!0),e(w).length==0?(s(),i("h3",xe,"No comments")):d("",!0),(s(!0),i(b,null,v(e(w),u=>(s(),i("div",{key:u.self},[t("h2",null,a(u.creatore_commento),1),t("p",null,a(u.testo),1),t("p",null,"Voto: "+a(u.punteggio_commento),1),we,e(r).token?(s(),i("button",{key:0,type:"button",class:"vote",onClick:C=>e(B)(1,u.id)},"Upvote",8,Be)):d("",!0),e(r).token?(s(),i("button",{key:1,type:"button",class:"vote",onClick:C=>e(B)(-1,u.id)},"Downvote",8,Ue)):d("",!0),e(r).token?(s(),i("button",{key:2,type:"button",class:"smaller",onClick:C=>e(ot)(u.id)},"Flag",8,Ve)):d("",!0),e(r).username==u.creatore_commento?(s(),i("button",{key:3,type:"button",class:"smaller",onClick:C=>e(nt)(u.id)},"Delete",8,$e)):d("",!0),e(r).username==u.creatore_commento?(s(),i("button",{key:4,type:"button",class:"smaller",onClick:C=>e(h)("edit"+u.id)},"Edit",8,Pe)):d("",!0),e(r).username==u.creatore_commento?(s(),i("div",{key:5,id:"edit"+u.id,style:{display:"none"}},[c(t("input",{type:"text",class:"textBox","onUpdate:modelValue":l[12]||(l[12]=C=>_(x)?x.value=C:null),placeholder:"Text"},null,512),[[p,e(x)]]),t("button",{type:"button",class:"smaller",onClick:C=>e(st)(u.id)},"Submit",8,Ne)],8,Se)):d("",!0)]))),128)),t("span",Te,a(e(it)),1)],8,ge),e(r).token?(s(),i("button",{key:2,type:"button",class:"smaller",onClick:u=>m.segnala(o.id)},"Flag",8,De)):d("",!0),Fe,Oe]))),128))])])],4))),128)),t("div",Ke,[Ee,c(t("input",{class:"textBox",type:"text",name:"titolo","onUpdate:modelValue":l[13]||(l[13]=n=>V.value=n),placeholder:"Titolo"},null,512),[[p,V.value]]),Me,c(t("input",{class:"textBox",type:"text",name:"testo","onUpdate:modelValue":l[14]||(l[14]=n=>P.value=n),placeholder:"Testo"},null,512),[[p,P.value]]),Le,c(t("input",{class:"textBox",type:"text",name:"tags","onUpdate:modelValue":l[15]||(l[15]=n=>$.value=n),placeholder:"Tags"},null,512),[[p,$.value]]),Re,t("label",je,[t("input",{type:"file",id:"file-upload",name:"media",accept:"image/*",onChange:pt},null,32),He]),t("button",{type:"button",class:"generic",onClick:_t},"Create post")]),(s(!0),i(b,null,v(e(Nt).values,n=>(s(),i("div",{key:n.self,class:"contentBox"},[t("h2",null,a(n.titolo),1),n.media!=null?(s(),i("img",{key:0,src:"/src/assets/"+n.media,height:"500",width:"500"},null,8,Ie)):d("",!0),We,t("h3",null,a(n.testo),1),Ae,(s(!0),i(b,null,v(n.tag,o=>(s(),i("p",null,"#"+a(o),1))),256)),t("p",null,"Upvotes: "+a(n.punteggio_post),1),q(g,{date:new Date(n.data)},null,8,["date"]),qe,t("button",{type:"button",class:"smaller",onClick:o=>{e(h)("commento"+n.id),e(lt)(n.id)}},"Comms",8,ze),Je,t("div",{class:"contentBox",name:"commento",id:"commento"+n.id,style:{display:"none"}},[e(w).length==0?(s(),i("h3",Ge,"No comments")):d("",!0),(s(!0),i(b,null,v(e(w),o=>(s(),i("div",{key:o.self},[t("h2",null,a(o.creatore_commento),1),t("p",null,a(o.testo),1),t("p",null,"Voto: "+a(o.punteggio_commento),1),Qe,e(r).token?(s(),i("button",{key:0,type:"button",class:"vote",onClick:u=>e(B)(1,o.id)},"Upvote",8,Xe)):d("",!0),e(r).token?(s(),i("button",{key:1,type:"button",class:"vote",onClick:u=>e(B)(-1,o.id)},"Downvote",8,Ze)):d("",!0),e(r).token?(s(),i("button",{key:2,type:"button",class:"smaller",onClick:u=>e(ot)(o.id)},"Flag",8,tl)):d("",!0),e(r).username==o.creatore_commento?(s(),i("button",{key:3,type:"button",class:"smaller",onClick:u=>e(nt)(o.id)},"Delete",8,el)):d("",!0),e(r).username==o.creatore_commento?(s(),i("button",{key:4,type:"button",class:"smaller",onClick:u=>e(h)("edit"+o.id)},"Edit",8,ll)):d("",!0),e(r).username==o.creatore_commento?(s(),i("div",{key:5,id:"edit"+o.id,style:{display:"none"}},[c(t("input",{type:"text",class:"textBox","onUpdate:modelValue":l[16]||(l[16]=u=>_(x)?x.value=u:null),placeholder:"Text"},null,512),[[p,e(x)]]),t("button",{type:"button",class:"smaller",onClick:u=>e(st)(o.id)},"Submit",8,nl)],8,ol)):d("",!0)]))),128)),t("span",sl,a(e(it)),1)],8,Ye),t("button",{type:"button",class:"smaller",onClick:o=>e(h)(n.id)},"Edit",8,il),t("div",{id:n.id,style:{display:"none"}},[al,c(t("input",{type:"text",class:"textBox",name:"titolo","onUpdate:modelValue":l[17]||(l[17]=o=>_(I)?I.value=o:null),placeholder:"New title"},null,512),[[p,e(I)]]),dl,c(t("input",{type:"text",class:"textBox",name:"testo","onUpdate:modelValue":l[18]||(l[18]=o=>_(W)?W.value=o:null),placeholder:"New text"},null,512),[[p,e(W)]]),rl,c(t("input",{type:"text",class:"textBox",name:"tags","onUpdate:modelValue":l[19]||(l[19]=o=>_(A)?A.value=o:null),placeholder:"New Tags"},null,512),[[p,e(A)]]),cl,t("button",{type:"button",class:"smaller",onClick:o=>e($t)(n.id,n.media)},"Submit",8,pl),_l,t("span",ml,a(e(Pt)),1)],8,ul),yl,t("button",{type:"button",class:"smaller",onClick:o=>e(St)(n.id)},"Delete",8,bl)]))),128))])):d("",!0),e(r).token?d("",!0):(s(),i("div",vl,[t("div",hl,[kl,t("form",{onSubmit:l[25]||(l[25]=Y((...n)=>e(k)&&e(k)(...n),["prevent"]))},[c(t("input",{class:"textBox",name:"username","onUpdate:modelValue":l[20]||(l[20]=n=>_(T)?T.value=n:null),onKeyup:l[21]||(l[21]=f((...n)=>e(k)&&e(k)(...n),["enter"]))},null,544),[[p,e(T)]]),gl,c(t("input",{class:"textBox",type:"password",name:"password","onUpdate:modelValue":l[22]||(l[22]=n=>_(D)?D.value=n:null),onKeyup:l[23]||(l[23]=f((...n)=>e(k)&&e(k)(...n),["enter"]))},null,544),[[p,e(D)]]),Cl,t("button",{class:"generic",type:"button",onClick:l[24]||(l[24]=(...n)=>e(k)&&e(k)(...n))},"Log in")],32),t("span",fl,a(e(ut)),1)]),t("div",xl,[wl,t("form",{onSubmit:l[35]||(l[35]=Y((...n)=>e(y)&&e(y)(...n),["prevent"]))},[c(t("input",{type:"text",name:"username","onUpdate:modelValue":l[26]||(l[26]=n=>_(F)?F.value=n:null),onKeyup:l[27]||(l[27]=f((...n)=>e(y)&&e(y)(...n),["enter"])),class:"textBox",placeholder:"Username"},null,544),[[p,e(F)]]),Bl,c(t("input",{type:"email",name:"email","onUpdate:modelValue":l[28]||(l[28]=n=>_(O)?O.value=n:null),onKeyup:l[29]||(l[29]=f((...n)=>e(y)&&e(y)(...n),["enter"])),class:"textBox",placeholder:"Email"},null,544),[[p,e(O)]]),Ul,c(t("input",{type:"password",name:"password","onUpdate:modelValue":l[30]||(l[30]=n=>_(K)?K.value=n:null),onKeyup:l[31]||(l[31]=f((...n)=>e(y)&&e(y)(...n),["enter"])),class:"textBox",placeholder:"Password"},null,544),[[p,e(K)]]),Vl,c(t("input",{type:"password",name:"password2","onUpdate:modelValue":l[32]||(l[32]=n=>_(E)?E.value=n:null),onKeyup:l[33]||(l[33]=f((...n)=>e(y)&&e(y)(...n),["enter"])),class:"textBox",placeholder:"Repeat Password"},null,544),[[p,e(E)]]),$l,t("button",{type:"button",class:"generic",onClick:l[34]||(l[34]=(...n)=>e(y)&&e(y)(...n))},"Sign me up")],32),t("span",Pl,a(e(Tt)),1)])]))],64)}}},Fl={__name:"ProfileView",setup(dt){return(rt,U)=>(s(),i("div",null,[q(Sl)]))}};export{Fl as default};
