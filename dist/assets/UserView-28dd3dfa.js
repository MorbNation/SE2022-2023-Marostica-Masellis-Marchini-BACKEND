import{h as O,j as N,k as T,o as R,r as G,b as n,c as s,e as t,l as H,w as p,v as k,m as z,t as c,F as y,d as b,n as A,u as e,g as a,i as v,p as W,f as I,_ as q}from"./index-ba19e415.js";import{l as i,o as J,a as f,v as E,s as Q,b as X,c as x,d as Y,p as j,e as D,g as Z,h as ee,i as U,j as te,k as oe}from"./post_comment-46476a66.js";import{f as ne,p as F,a as $,b as B,c as se,v as K,s as le,d as ae,e as V,g as P,h as ie,i as ue}from"./profile_comment-1473af09.js";const re={class:"mainWrapper"},ce={class:"contentBox"},de=["onSubmit"],_e=t("span",null,"Lookup user page",-1),me=t("br",null,null,-1),pe=["onKeyup"],ke=t("br",null,null,-1),ve={style:{color:"red"}},he=["onClick"],ye=t("br",null,null,-1),be=t("br",null,null,-1),Ce=["src"],fe=t("br",null,null,-1),ge=["onClick"],we=["id"],xe={key:0},Ue={key:1},$e=t("h2",null,"New comment",-1),Be=t("br",null,null,-1),Ve=t("br",null,null,-1),Pe=["onClick"],Se=["onClick"],Ne=["onClick"],Te=["onClick"],Ee=["onClick"],je=["onClick"],De=["id"],Fe=t("br",null,null,-1),Ke=t("br",null,null,-1),Ie=["onClick"],Le={style:{color:"red"}},Me=["src"],Oe=t("br",null,null,-1),Re=t("br",null,null,-1),Ge=t("br",null,null,-1),He=["onClick"],ze=["onClick"],Ae=["onClick"],We=["onClick"],qe=t("br",null,null,-1),Je=["id"],Qe={key:0,name:"newComment"},Xe=["onClick"],Ye={key:1},Ze=t("br",null,null,-1),et=["onClick"],tt=["onClick"],ot=["onClick"],nt=["onClick"],st=["onClick"],lt=["id"],at=["onClick"],it={style:{color:"red"}},ut=["onClick"],rt=t("br",null,null,-1),ct=t("br",null,null,-1),dt="https://epiopera-4f1c76fdd577.herokuapp.com/",_t={__name:"UserPage",setup(L){const g=dt+"api",S=O(),_=N(""),m=N(""),h=T([]),w=T([]);R(()=>{m.value=S.params.username,m.value!=null&&C()});async function C(){if(h.values=[],w.values=[],m.value==""){_.value="Please specify a username!";return}_.value="";try{const d=await fetch(g+"/utente/"+m.value,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"});if(d.ok)w.values=await d.json();else{const u=await d.json();_.value=u.Error||"Something went wrong"}}catch(d){_.value="Network error",console.log(d)}try{const d=await fetch(g+"/post/user/"+m.value,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"});if(d.ok)h.values=await d.json();else{const u=await d.json();_.value=u.Error||"Something went wrong",h.values=[]}}catch(d){_.value="Network error",console.log(d),h.values=[]}}return(d,u)=>{const M=G("date-format");return n(),s("div",re,[t("div",ce,[t("form",{onSubmit:H(C,["prevent"])},[_e,me,p(t("input",{class:"textBox","onUpdate:modelValue":u[0]||(u[0]=l=>m.value=l),onKeyup:z(C,["enter"]),placeholder:"Username"},null,40,pe),[[k,m.value]]),t("button",{type:"button",class:"generic",onClick:C},"Search user"),ke,t("span",ve,c(_.value),1)],40,de)]),(n(!0),s(y,null,b(w.values,l=>(n(),s("div",{class:"userBox",key:d.self,style:A({backgroundImage:"url(/src/assets/"+l.banner+")"})},[t("h2",null,c(l.username),1),e(i).token?(n(),s("button",{key:0,type:"button",class:"generic",onClick:o=>e(J)(l.username)},"Follow/Unfollow",8,he)):a("",!0),ye,be,t("img",{class:"circular",src:"/src/assets/"+l.icona_profilo,alt:"ProPic",width:"100",height:"100"},null,8,Ce),fe,t("p",null,"Userscore: "+c(l.userscore),1),t("button",{type:"button",class:"smaller",onClick:o=>{e(f)("commenti"+l.username),e(ne)(l.username)}},"Comms",8,ge),t("div",{class:"contentBox",id:"commenti"+l.username,style:{display:"none"}},[e(F).length==0?(n(),s("h3",xe,"No comments")):a("",!0),e(i).username!=l.username&&e(i).token?(n(),s("div",Ue,[$e,p(t("input",{type:"text",class:"textBox","onUpdate:modelValue":u[1]||(u[1]=o=>v($)?$.value=o:null),placeholder:"Title"},null,512),[[k,e($)]]),Be,p(t("input",{type:"text",class:"textBox","onUpdate:modelValue":u[2]||(u[2]=o=>v(B)?B.value=o:null),placeholder:"Text"},null,512),[[k,e(B)]]),Ve,t("button",{type:"button",class:"smaller",onClick:o=>e(se)(l.username)},"Submit",8,Pe)])):a("",!0),(n(!0),s(y,null,b(e(F),o=>(n(),s("div",{key:o.self},[t("h2",null,c(o.titolo),1),t("h3",null,c(o.creatore_commento),1),t("p",null,c(o.testo),1),t("p",null,"Voto: "+c(o.punteggio_commento),1),e(i).token?(n(),s("button",{key:0,type:"button",class:"vote",onClick:r=>e(K)(1,o.id)},"Upvote",8,Se)):a("",!0),e(i).token?(n(),s("button",{key:1,type:"button",class:"vote",onClick:r=>e(K)(-1,o.id)},"Downvote",8,Ne)):a("",!0),e(i).token?(n(),s("button",{key:2,type:"button",class:"smaller",onClick:r=>e(le)(o.id)},"Flag",8,Te)):a("",!0),e(i).username==o.creatore_commento?(n(),s("button",{key:3,type:"button",class:"smaller",onClick:r=>e(ae)(o.id)},"Delete",8,Ee)):a("",!0),e(i).username==o.creatore_commento?(n(),s("button",{key:4,type:"button",class:"smaller",onClick:r=>e(f)("edit"+o.id)},"Edit",8,je)):a("",!0),e(i).username==o.creatore_commento?(n(),s("div",{key:5,id:"edit"+o.id,style:{display:"none"}},[p(t("input",{type:"text",class:"textBox","onUpdate:modelValue":u[3]||(u[3]=r=>v(V)?V.value=r:null),placeholder:"New Title"},null,512),[[k,e(V)]]),Fe,p(t("input",{type:"text",class:"textBox","onUpdate:modelValue":u[4]||(u[4]=r=>v(P)?P.value=r:null),placeholder:"New Text"},null,512),[[k,e(P)]]),Ke,t("button",{type:"button",class:"smaller",onClick:r=>e(ie)(o.id)},"Submit",8,Ie)],8,De)):a("",!0)]))),128)),t("span",Le,c(e(ue)),1)],8,we)],4))),128)),(n(!0),s(y,null,b(h.values,l=>(n(),s("div",{key:l.self,class:"contentBox"},[t("h2",null,c(l.titolo),1),t("img",{src:"/src/assets/"+l.media,height:"500",width:"500"},null,8,Me),Oe,t("p",null,c(l.testo),1),(n(!0),s(y,null,b(l.tag,o=>(n(),s("p",null,"#"+c(o),1))),256)),W("text "),t("p",null,"Upvotes: "+c(l.punteggio_post),1),I(M,{date:new Date(l.data)},null,8,["date"]),Re,Ge,e(i).token?(n(),s("button",{key:0,class:"vote",onClick:o=>e(E)(1,l.id)},"Upvote",8,He)):a("",!0),e(i).token?(n(),s("button",{key:1,class:"vote",onClick:o=>e(E)(-1,l.id)},"Downvote",8,ze)):a("",!0),e(i).token?(n(),s("button",{key:2,class:"smaller",onClick:o=>e(Q)(l.id)},"Save",8,Ae)):a("",!0),t("button",{type:"button",class:"smaller",onClick:o=>{e(f)("commento"+l.id),e(X)(l.id)}},"Comms",8,We),qe,t("div",{class:"contentBox",name:"commento",id:"commento"+l.id,style:{display:"none"}},[e(i).token?(n(),s("div",Qe,[p(t("input",{type:"text",class:"textBox",name:"newCommento","onUpdate:modelValue":u[5]||(u[5]=o=>v(x)?x.value=o:null),placeholder:"Comment"},null,512),[[k,e(x)]]),t("button",{type:"button",class:"smaller",onClick:o=>e(Y)(l.id)},"Submit",8,Xe)])):a("",!0),e(j).length==0?(n(),s("h3",Ye,"No comments")):a("",!0),(n(!0),s(y,null,b(e(j),o=>(n(),s("div",{key:o.self},[t("h2",null,c(o.creatore_commento),1),t("p",null,c(o.testo),1),t("p",null,"Voto: "+c(o.punteggio_commento),1),Ze,e(i).token?(n(),s("button",{key:0,type:"button",class:"vote",onClick:r=>e(D)(1,o.id)},"Upvote",8,et)):a("",!0),e(i).token?(n(),s("button",{key:1,type:"button",class:"vote",onClick:r=>e(D)(-1,o.id)},"Downvote",8,tt)):a("",!0),e(i).token?(n(),s("button",{key:2,type:"button",class:"smaller",onClick:r=>e(Z)(o.id)},"Flag",8,ot)):a("",!0),e(i).username==o.creatore_commento?(n(),s("button",{key:3,type:"button",class:"smaller",onClick:r=>e(ee)(o.id)},"Delete",8,nt)):a("",!0),e(i).username==o.creatore_commento?(n(),s("button",{key:4,type:"button",class:"smaller",onClick:r=>e(f)("edit"+o.id)},"Edit",8,st)):a("",!0),e(i).username==o.creatore_commento?(n(),s("div",{key:5,id:"edit"+o.id,style:{display:"none"}},[p(t("input",{type:"text",class:"textBox","onUpdate:modelValue":u[6]||(u[6]=r=>v(U)?U.value=r:null),placeholder:"Text"},null,512),[[k,e(U)]]),t("button",{type:"button",class:"smaller",onClick:r=>e(te)(o.id)},"Submit",8,at)],8,lt)):a("",!0)]))),128)),t("span",it,c(e(oe)),1)],8,Je),e(i).token?(n(),s("button",{key:3,type:"button",class:"smaller",onClick:o=>d.segnala(l.id)},"Flag",8,ut)):a("",!0),rt,ct]))),128))])}}};const mt={__name:"UserView",setup(L){return(g,S)=>(n(),s("div",null,[I(_t)]))}},ht=q(mt,[["__scopeId","data-v-d3facdff"]]);export{ht as default};
