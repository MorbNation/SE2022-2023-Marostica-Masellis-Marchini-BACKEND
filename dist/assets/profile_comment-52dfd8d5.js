import{p as m}from"./post_comment-c7d613a5.js";import{k as d,j as r}from"./index-b60468ef.js";const w={}.VITE_API_HOST||"https://epiopera-4f1c76fdd577.herokuapp.com",a=w+"/api",c=d([]),i=r(""),p=r(""),f=r(""),l=r(""),h=r("");async function u(n){let e=[];c.splice(0);try{const o=await fetch(a+"/commento_profilo/all/"+n,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"});if(o.ok)e=await o.json();else{const t=await o.json();i.value=t.Error||"Something went wrong",e=[]}}catch(o){i.value="Network error",console.log(o),e=[]}for(const o of e){console.log("fetching comment "+o);try{const t=await fetch(a+"/commento_profilo/"+o,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"});if(t.ok)c.push(await t.json());else{const s=await t.json();c.push({testo:s.Error||"Something went wrong"}),console.log(s.Error)}}catch(t){m.push({testo:"Network error"}),console.log(t)}}}async function j(n){let e={profilo_commentato:n,titolo:h.value,testo:l.value};l.value="";try{const o=await fetch(a+"/commento_profilo",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(o.ok)console.log(o);else{const t=await o.json();console.log(o),window.alert(t.Error||"Something went wrong")}}catch(o){window.alert("Network error"),console.log(o)}}async function k(n,e){let o={id:e,valutazione:n};try{const t=await fetch(a+"/commento_profilo/valuta",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(o),credentials:"include"});if(t.ok)console.log(t);else{const s=await t.json();window.alert(s.Error||"Something went wrong")}}catch(t){window.alert("Network error"),console.log(t)}}async function E(n){let e={id:n};try{const o=await fetch(a+"/commento_profilo/segnala",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(o.ok)console.log(o);else{const t=await o.json();window.alert(t.Error||"Something went wrong")}}catch(o){window.alert("Netwrok error"),console.log(o)}}async function C(n){try{const e=await fetch(a+"/commento_profilo/"+n,{method:"DELETE",headers:{"Content-type":"application/json"},credentials:"include"});if(e.ok)console.log(e);else{const o=await e.json();window.alert(o.Error||"Something went wrong")}}catch(e){window.alert("Network error"),console.log(e)}}async function S(n){let e={id:n,titolo:f.value,testo:p.value};try{const o=await fetch(a+"/commento_profilo/modifica",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(o.ok)console.log(o);else{const t=await o.json();window.alert(t.Error||"Something went wrong")}}catch(o){window.alert("Network error"),console.log(o)}}export{h as a,l as b,j as c,C as d,f as e,u as f,p as g,S as h,i,c as p,E as s,k as v};
